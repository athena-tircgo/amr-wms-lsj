<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>PTS â‡„ WMS é€šè¨Šè¦æ ¼æ›¸</title>

<!-- Mermaid UMD ç‰ˆæœ¬ -->
<script src="https://cdn.jsdelivr.net/npm/mermaid@9.4.0/dist/mermaid.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<style>
body {
  font-family: "Noto Sans TC", sans-serif;
  max-width: 960px;
  margin: 40px auto;
  line-height: 1.6;
  color: #222;
  background-color: #fdfdfd;
  padding: 0 24px;
}
pre {
  background: #f5f5f5;
  padding: 8px 12px;
  border-radius: 6px;
  overflow-x: auto;
}
h1, h2, h3 { color: #004b8d; }
.page-break { display: block; page-break-before: always; break-before: page; }
@media print {
  .page-break { page-break-before: always; break-before: page; }
}
</style>
</head>
<body>
<div id="content">ğŸš€ æ­£åœ¨è¼‰å…¥ README.md...</div>

<script>
const pageBreakTitles = ["0. ç‰ˆæœ¬ç®¡ç†", "1. ç¸½è¦½", "2. API å®šç¾©"]; // æŒ‡å®šæ›é æ¨™é¡Œ

fetch("README.md")
  .then(res => res.text())
  .then(mdText => {
    const container = document.getElementById("content");
    container.innerHTML = marked.parse(mdText);

    // å°‡ Mermaid code å€å¡Šè½‰æˆ div
    document.querySelectorAll("pre code.language-mermaid").forEach(block => {
      const parent = block.parentElement;
      const div = document.createElement("div");
      div.className = "mermaid";
      div.textContent = block.textContent.trim();
      parent.replaceWith(div);
    });

    // åˆå§‹åŒ– Mermaid
    if (window.mermaid) {
      mermaid.initialize({ startOnLoad: false });
      mermaid.init(undefined, document.querySelectorAll(".mermaid"));
    }

    // æŒ‡å®šæ¨™é¡Œæ›é ï¼Œæ³¨æ„è¦åœ¨ Mermaid åˆå§‹åŒ–å¾Œï¼Œé¿å…ç ´å£åœ–è¡¨
    document.querySelectorAll("#content h2, #content h3").forEach(header => {
      const title = header.textContent.trim();
      if (pageBreakTitles.includes(title)) {
        const breaker = document.createElement("div");
        breaker.className = "page-break";
        header.before(breaker);
      }
    });

  })
  .catch(err => {
    document.getElementById("content").innerHTML = "âŒ è¼‰å…¥å¤±æ•—ï¼š" + err;
  });
</script>
</body>
</html>
